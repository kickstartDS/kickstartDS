@use '../../0-base/1-tools/scss/details-reset';
@use '../../0-base/1-tools/scss/helpers';
@use 'bourbon/core/bourbon';
@use 'settings/base';
@use 'settings/global';

.dropdown {
  details {
    @include details-reset.details-reset;

    box-sizing: border-box;
    position: relative;
    z-index: global.$dropdown-zindex;

    &[open] {
      .dropdown__content {
        box-shadow: 0 0 15px rgba(base.$color-black, 0.15);
        z-index: -1;
      }
    }
  }

  summary {
    display: flex; // ie fix
  }

  &--is-open {
    .dropdown__toggle {
      > .icon {
        transform: rotateX(180deg);
      }
    }
  }

  &__toggle {
    /* critical:start */
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;
    width: 100%;
    border: 1px solid base.$color-black-25-solid;
    position: relative;
    background: #fff;
    /* critical:end */

    > .icon {
      transition: transform 0.3s;
    }
  }

  &__title {
    @include bourbon.ellipsis;

    flex-grow: 1;
    text-align: left;
  }

  &__content {
    position: absolute;
    top: 100%;
    width: 100%;
    background: white;
    border: 1px solid base.$color-black-10-solid;
    border-top: 0;
  }

  &__scroll-content {
    -webkit-overflow-scrolling: touch;
    background-image: radial-gradient(
        ellipse at top,
        rgba(base.$color-black, 0.1) 0%,
        rgba(base.$color-black, 0) 85%
      ),
      radial-gradient(
        ellipse at bottom,
        rgba(base.$color-black, 0.1) 0%,
        rgba(base.$color-black, 0) 85%
      );
    background-size: 100% 0.4rem;
    background-position: top, bottom;
    background-repeat: no-repeat;
    max-height: 12rem;
    overflow-y: auto;

    &:last-child > .dropdown__list {
      border-bottom: 0;
    }
  }

  &__list {
    @include helpers.clearlist;

    background-image: linear-gradient(to top, white 100%, rgba(white, 0) 100%),
      linear-gradient(to bottom, rgba(white, 1) 100%, rgba(white, 0) 100%);
    background-size: inherit;
    background-position: inherit;
    background-repeat: inherit;

    &__item {
      display: block;
      width: 100%;
      line-height: normal;
      text-decoration: none;

      a {
        &:hover {
          background: base.$color-black-10;
        }
      }
    }
  }

  &__action {
    padding: 0.5rem;
  }
}
